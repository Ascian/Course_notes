# 计算机系统结构基础知识

## 计算机系统的基本概念

### 计算机系统的层次结构

* 物理机：用固件/硬件实现的机器
    * 固件：具有软件功能的硬件
* 虚拟机：由软件实现的机器
* 各机器级的实现主要靠翻译或解释
    * 翻译：先用转换程序把高一级机器上的程序转换成低一级机器上的等效程序，然后在这低一级机器上运行
    * 解释：对于高一级程序上的每一条指令都转去执行低一级机器上的一段等效程序，执行完在取下一条指令
    * 解释执行花费时间更多，但占用内存更少

从计算机语言的角度，吧计算机系统按功能划分为多级层次结构：

* 第一级：微程序机器（物理机）
* 第二级：传统机器语言机器（物理机）
* 第三级：操作系统虚拟机
* 第四级：汇编语言虚拟机
* 第五级：高级语言虚拟机
* 第六级：应用语言虚拟机
 
 ### 计算机系统结构的定义

 * 计算机系统结构的经典定义：传统机器程序员所看到的的计算机属性，即概念型结构和功能特性
 * 按照计算机的多级层次结构，不同级程序员所看到的的计算机具有不同属性。(透明性)低层计算机属性对于高级计算机的程序员时“看不见”的
 * 广义的系统结构定义：指令系统结构、组成、硬件
 * 计算机系统结构的实质：确定计算机系统中软硬件的界面，界面之上时软件实现的功能，界面之下时硬件实现的功能

### 计算机组成和计算机实现

* 计算机系统结构：计算机系统软硬件的界面
* 计算机组成：计算机系统结构的逻辑实现。着眼于物理机器级内各事件的排序方式与控制方式、各部件功能以及各部件之间的联系
* 计算机实现：计算机组成的物理实现。着眼于器件技术、微组装技术
* 具有相同计算机系统结构的计算机可以采用不同的计算机组成，同一种计算机组成又可以采用多种不同的计算机实现
* 系列机：由同一厂商生产的具有相同计算机系统结构、但具有不同组成和实现的一列不同型号的机器

### 计算机系统结构的分类

* Flynn分类法：按照数据流和指令流的多倍性(同时处于同一执行阶段的指令或数据的最大数目）进行划分
  * 单指令单数据流(SISD)
  * 单指令多数据流(SIMD)
  * 多指令单数据流(MISD)
  * 多指令多数据流(MIMD)
* 冯氏分类法：用系统的最大并行度(计算机系统在单位时间内能够处理的最大二进制位数)对计算机进行分类
    * 字串位串
    * 字串位并
    * 字并位串
    * 字并位并
> 平均并行度：假设每个时钟周期内能同时处理的二进制位数为$P_i$，则T个时钟周期内的平均并行度为：
$$P_a = \frac{\sum \limits_{i=1}^{T}P_i}{T}$$

> 平均利用率：系统在T个时钟周期内的平均利用率定义为：
$$\mu = \frac{P_a}{P_m} = \frac{\sum \limits_{i=1}^{T}P_i}{TP_m}$$
* Handle分类法：根据并行度和流水线对计算机进行分类
    * t(系统型号) = (k, d, w)
      * 程序控制部件（PCU）的个数k
      * 算数逻辑部件（ALU）或处理部件（PE）的个数d
      * 每个算数逻辑部件包含基本逻辑线路（ELC）的套数w